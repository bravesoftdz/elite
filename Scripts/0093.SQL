/*
** ITENS DESNECESSÁRIOS
*/

DROP VIEW REL_ESTOQUE!

ALTER TABLE "PRODUTOS" DROP "LOCAL"!

ALTER TRIGGER PROVAR_UPD
ACTIVE AFTER UPDATE POSITION 10
AS
   DECLARE VARIABLE NOVO     NUMERIC(9,2);
   DECLARE VARIABLE ANTIGO   NUMERIC(9,2);
   DECLARE VARIABLE REAJUSTE NUMERIC(9,2);
BEGIN
   NOVO   = NEW.PRECOVENDA;
   ANTIGO = OLD.PRECOVENDA;
   IF (NOVO <> ANTIGO) THEN
     BEGIN
       IF (NOVO > ANTIGO) THEN
         REAJUSTE = (((NOVO - ANTIGO) * 100) / ANTIGO);
       ELSE
         REAJUSTE = (((ANTIGO - NOVO) * 100) / NOVO * -1);
       INSERT INTO VARIACAO_VALOR (CODPRODUTO, VALOR_ANTIGO, VALOR_NOVO, REAJUSTE)
         VALUES (OLD.CODIGO, :ANTIGO, :NOVO, :REAJUSTE);
     END
END!

ALTER TABLE "PRODUTOS" DROP "CUSTO_TOTAL"!

ALTER TABLE "PRODUTOS" DROP "VENDA_TOTAL"!

INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (93, CURRENT_TIMESTAMP)!