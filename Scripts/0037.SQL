/* comissionamento de serviços */

CREATE TABLE VEICULOS(
   CODIGO        INTEIRO_VALIDO,
   CODMARCA      INTEIRO_VALIDO,
   CODMODELO     INTEIRO_VALIDO,
   ANO           INTEIRO_VALIDO,
   KM_INICIAL    INTEIRO_VALIDO,
   CHASSI        STR60_VALIDO,
   PRIMARY KEY   (CODIGO),
   FOREIGN KEY   (CODMODELO, CODMARCA)
   REFERENCES    MODELOS(CODIGO, CODEQUIPAMENTO)
   ON UPDATE CASCADE
)!

GRANT ALL ON VEICULOS TO PUBLIC!

ALTER TABLE OS_VENDER ADD
  CODVEICULO  INTEIRO!

ALTER TABLE OS_VENDER ADD
  KMINI       INTEIRO!

ALTER TABLE OS_VENDER ADD
  KMFIM       INTEIRO!

ALTER TABLE OS_VENDER ADD
  KM_TOTAL    INTEGER COMPUTED BY (KMFIM - KMINI)!

ALTER TABLE OS_VENDER ADD
  CONSTRAINT OS_VENDER_FK03
  FOREIGN KEY (CODVEICULO)
  REFERENCES VEICULOS(CODIGO)
  ON UPDATE CASCADE!

ALTER TABLE OS_VENDER ADD
  TMINUTOS    INTEIRO!

INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (37, CURRENT_TIMESTAMP)!
