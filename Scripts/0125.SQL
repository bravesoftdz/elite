/*
** CENTROS NOS PRODUTOS
*/

SET TERM !;

ALTER TABLE PRODUTOS ADD CODCENTRO INTEIRO_VALIDO!

ALTER TRIGGER VERIFICA_BARRA_UPD INACTIVE!
ALTER TRIGGER PRODUTOS_MARGEM_UPD INACTIVE!
ALTER TRIGGER PROVAR_UPD INACTIVE!

UPDATE PRODUTOS SET CODCENTRO = 1!

ALTER TRIGGER VERIFICA_BARRA_UPD ACTIVE!
ALTER TRIGGER PRODUTOS_MARGEM_UPD ACTIVE!
ALTER TRIGGER PROVAR_UPD ACTIVE!

ALTER TABLE PRODUTOS
ADD CONSTRAINT PRODUTOS_FK03
FOREIGN KEY (CODCENTRO)
REFERENCES CENTROS(CODIGO)
ON UPDATE CASCADE!
 
INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (125, CURRENT_TIMESTAMP)!