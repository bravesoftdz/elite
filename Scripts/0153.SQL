/*
** PROTECAO DA SEQUENCIA
*/

CREATE EXCEPTION SEQUENCIA_PRIVILEGIO 
  'SOMENTE O ADMINISTRADOR PODE ALTERAR DETALHES DA SEQUENCIA';

SET TERM ^ ;

CREATE TRIGGER SEQUENCIA_BU0 FOR SEQUENCIA
ACTIVE BEFORE UPDATE POSITION 0
AS
BEGIN

  IF ((OLD.TABELA <> NEW.TABELA) AND (USER <> 'SYSDBA')) THEN
    EXCEPTION SEQUENCIA_PRIVILEGIO;

END

^

SET TERM ; ^

SET TERM ^ ;

CREATE TRIGGER SEQUENCIA_BD0 FOR SEQUENCIA
ACTIVE BEFORE DELETE POSITION 0
AS
BEGIN

  IF (USER <> 'SYSDBA') THEN
    EXCEPTION SEQUENCIA_PRIVILEGIO;

END

^

SET TERM ; ^

INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (153, CURRENT_TIMESTAMP);
COMMIT;