/* novas funcionalidades para o DOSPRINT */

ALTER TABLE IMPOS     ADD EFEITOBASE STR10!

ALTER TABLE IMPNOTA   ADD EFEITOBASE STR10!

ALTER TABLE IMPBOLETO ADD EFEITOBASE STR10!

/* correcoes */

ALTER PROCEDURE REL_NOTADUP (
    CODMOVIMENTO INTEGER)
RETURNS (
    MOVIMENTO INTEGER,
    NUMERO SMALLINT,
    DESCRICAO VARCHAR(40) CHARACTER SET NONE,
    DATACADAST TIMESTAMP,
    VALOR NUMERIC(9,2),
    DATAVENCIMENTO TIMESTAMP,
    CODIGO INTEGER)
AS
BEGIN
   FOR
   SELECT
     CODIGO,
     NUMERO,
     DESCRICAO,
     DATACADAST,
     VALOR,
     DATAVENCIMENTO
   FROM
     PAGAMENTOS
   WHERE
     CODMOVIMENTO = :CODMOVIMENTO AND
     ES = 2
   INTO
     :CODIGO,
     :NUMERO,
     :DESCRICAO,
     :DATACADAST,
     :VALOR,
     :DATAVENCIMENTO
   DO
   BEGIN
     MOVIMENTO = CODMOVIMENTO;
     SUSPEND;
   END
END!