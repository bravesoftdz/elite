/*
** NOME DO VENDEDOR NOS MOVIMENTOS II (REDUNDANCIA)
*/

CREATE TRIGGER MOVIMENTOS_VENDEDOR_INS FOR MOVIMENTOS
ACTIVE BEFORE INSERT POSITION 0
AS
BEGIN
  /* NOME DO VENDEDOR */
  SELECT
    NOME
  FROM
    CLIENTES
  WHERE
    CODIGO = NEW.CODVENDEDOR
  INTO
    NEW.NOME_VENDEDOR;
END!

CREATE TRIGGER MOVIMENTOS_VENDEDOR_UPD FOR MOVIMENTOS
ACTIVE BEFORE UPDATE POSITION 0
AS
BEGIN
  /* NOME DO VENDEDOR */
  SELECT
    NOME
  FROM
    CLIENTES
  WHERE
    CODIGO = NEW.CODVENDEDOR
  INTO
    NEW.NOME_VENDEDOR;
END!

INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (84, CURRENT_TIMESTAMP)!