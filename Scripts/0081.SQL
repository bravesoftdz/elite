/*
** SUPORTE AO EMPRESA1 5.0
*/

CREATE DOMAIN STRLONGO        BLOB SUB_TYPE 1!
CREATE DOMAIN STRLONGO_VALIDO BLOB SUB_TYPE 1 NOT NULL!

CREATE DOMAIN STR254_VALIDO VARCHAR(254) NOT NULL!

CREATE TABLE E1_FORMS (
  CODIGO         INTEIRO_VALIDO,
  NOME           STR40_VALIDO,
  MOSTRAR_TODOS  SIMNAO,
  SELECIONAR_SQL STR254_VALIDO,
  DETALHES_SQL   STR254_VALIDO,
  CONSTRAINT     E1_FORMS_PK
  PRIMARY KEY    (CODIGO)
)!

CREATE UNIQUE INDEX E1_FORMS_NOME ON E1_FORMS(NOME)!

GRANT SELECT ON E1_FORMS TO PUBLIC!

CREATE TABLE E1_FORMS_POS (
  CODFORM        INTEIRO_VALIDO,
  NOMEUSER       STR30_VALIDO,
  P_TOP          INTEIRO_VALIDO,
  P_LEFT         INTEIRO_VALIDO,
  P_HEIGHT       INTEIRO_VALIDO,
  P_WIDTH        INTEIRO_VALIDO,
  P_STATE        INTEIRO_VALIDO,
  CONSTRAINT     E1_FORMS_POS_PK
  PRIMARY KEY    (CODFORM, NOMEUSER),
  CONSTRAINT     E1_FORMS_POS_FK01
  FOREIGN KEY    (CODFORM)
  REFERENCES     E1_FORMS(CODIGO)
  ON UPDATE CASCADE
  ON DELETE CASCADE
)!

CREATE INDEX E1_FORMS_POS_NOMEUSER ON E1_FORMS_POS(NOMEUSER)!

GRANT SELECT ON E1_FORMS_POS TO PUBLIC!

CREATE DOMAIN TIPOCAMPO CHAR(1) 
  DEFAULT 'A' NOT NULL
  CHECK (VALUE IN ('A', 'N', 'D'))!

CREATE TABLE E1_FORMS_FIELDS (
  CODFORM        INTEIRO_VALIDO,
  CAMPO          STR30_VALIDO,
  FILTRAGEM      SIMNAO,
  ORDENACAO      SIMNAO,
  GRADE          SIMNAO,
  BUSCA_VISUAL   SIMNAO,
  FIL_DEFAULT    SIMNAO,
  ORD_DEFAULT    SIMNAO,
  G_WIDTH        INTEIRO_VALIDO,
  G_ALIGN        STRALINHA,
  MASCARA        STR30,
  TIPO           TIPOCAMPO,
  CONSTRAINT     E1_FORMS_FIELDS_PK
  PRIMARY KEY    (CODFORM, CAMPO),
  CONSTRAINT     E1_FORMS_FIELDS_FK01
  FOREIGN KEY    (CODFORM)
  REFERENCES     E1_FORMS(CODIGO)
  ON UPDATE CASCADE
  ON DELETE CASCADE
)!
  
CREATE INDEX E1_FORMS_FIELDS_FILTRAGEM   ON E1_FORMS_FIELDS(FILTRAGEM)!
CREATE INDEX E1_FORMS_FIELDS_ORDENACAO   ON E1_FORMS_FIELDS(ORDENACAO)!
CREATE INDEX E1_FORMS_FIELDS_GRADE       ON E1_FORMS_FIELDS(GRADE)!
CREATE INDEX E1_FORMS_FIELDS_FIL_DEFAULT ON E1_FORMS_FIELDS(FIL_DEFAULT)!
CREATE INDEX E1_FORMS_FIELDS_ORD_DEFAULT ON E1_FORMS_FIELDS(ORD_DEFAULT)!

GRANT SELECT ON E1_FORMS_FIELDS TO PUBLIC!

/* ATE AQUI */


INSERT INTO SCRIPTVER(NUMERO, DATA) VALUES (81, CURRENT_TIMESTAMP)!
